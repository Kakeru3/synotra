task main() distributed {
    val n = 10
    val m = 15

    // 複数の並列タスク呼び出し
    fibTasks(n)
    computeTasks(m)
    fizzbuzz(n * 10)
}

task fibTasks(count: Int) distributed {
    fun fib(x: Int): Int {
        if x <= 1 {
            return x
        } else {
            return fib(x - 1) + fib(x - 2)
        }
    }

    for i in 1..count do {
        val result = fib(i)
        print("Fib(" + i.toString() + ") = " + result.toString())
    }
}

task computeTasks(count: Int) distributed {
    fun heavyCalc(x: Int): Int {
        var sum = 0
        var i = 0
        while i < x do {
            if i % 2 == 0 || i % 3 == 0 {
                sum = sum + i * 2
            } else {
                sum = sum + i
            }
            i = i + 1
        }
        return sum
    }

    for i in 1..count do {
        val value = heavyCalc(i)
        print("Calc(" + i.toString() + ") = " + value.toString())
    }
}

task fizzbuzz(n: Int) distributed {
    fun fizzbuzzValue(i: Int): String {
        if i % 15 == 0 {
            return "FizzBuzz"
        } else if i % 3 == 0 {
            return "Fizz"
        } else if i % 5 == 0 {
            return "Buzz"
        } else {
            return i.toString()
        }
    }

    for i in 1..n do {
        val result = fizzbuzzValue(i)
        print(result)
    }
}